<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Android基础," />





  <link rel="alternate" href="/atom.xml" title="Scott-小白" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="1. 拖动条(SeekBar)  SeekBar.getProgress()获取拖动条当前值 调用setOnSeekBarChangeListener()方法，处理拖动条值变化事件，把SeekBar.OnSeekBarChangeListener实例作为参数传入。  代码处理: 123456789101112131415161718192021222324252627282930public cl">
<meta name="keywords" content="Android基础">
<meta property="og:type" content="article">
<meta property="og:title" content="Android基础12 常用UI（中）">
<meta property="og:url" content="http://www.sguotao.com/blog/2011/08/Android基础-2011-08-10-android-basic-12.html">
<meta property="og:site_name" content="Scott-小白">
<meta property="og:description" content="1. 拖动条(SeekBar)  SeekBar.getProgress()获取拖动条当前值 调用setOnSeekBarChangeListener()方法，处理拖动条值变化事件，把SeekBar.OnSeekBarChangeListener实例作为参数传入。  代码处理: 123456789101112131415161718192021222324252627282930public cl">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui1.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui2.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui3.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui4.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui5.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui6.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui7.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui8.png">
<meta property="og:image" content="http://obovytgzz.bkt.clouddn.com/ui9.png">
<meta property="og:updated_time" content="2016-11-22T01:59:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android基础12 常用UI（中）">
<meta name="twitter:description" content="1. 拖动条(SeekBar)  SeekBar.getProgress()获取拖动条当前值 调用setOnSeekBarChangeListener()方法，处理拖动条值变化事件，把SeekBar.OnSeekBarChangeListener实例作为参数传入。  代码处理: 123456789101112131415161718192021222324252627282930public cl">
<meta name="twitter:image" content="http://obovytgzz.bkt.clouddn.com/ui1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.sguotao.com/blog/2011/08/Android基础-2011-08-10-android-basic-12.html"/>





  <title>Android基础12 常用UI（中） | Scott-小白</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?760edc77a59a2329550e2d68c6400d9b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Scott-小白</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.sguotao.com/blog/2011/08/Android基础-2011-08-10-android-basic-12.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Scott">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Scott-小白">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                Android基础12 常用UI（中）
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-08-10T00:00:00+08:00">
                2011-08-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2011/08/Android基础-2011-08-10-android-basic-12.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="/blog/2011/08/Android基础-2011-08-10-android-basic-12.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-拖动条-SeekBar"><a href="#1-拖动条-SeekBar" class="headerlink" title="1. 拖动条(SeekBar)"></a>1. 拖动条(SeekBar)</h2><p><img src="http://obovytgzz.bkt.clouddn.com/ui1.png" alt="图片1"></p>
<ol>
<li>SeekBar.getProgress()获取拖动条当前值</li>
<li>调用setOnSeekBarChangeListener()方法，处理拖动条值变化事件，把SeekBar.OnSeekBarChangeListener实例作为参数传入。</li>
</ol>
<p>代码处理:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeekBarActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> SeekBar seekBar;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.seekbar);</div><div class="line">        seekBar = (SeekBar) findViewById(R.id.seekBar);</div><div class="line">        seekBar.setMax(<span class="number">100</span>);<span class="comment">//设置最大刻度</span></div><div class="line">        seekBar.setProgress(<span class="number">30</span>);<span class="comment">//设置当前刻度</span></div><div class="line">        seekBar.setOnSeekBarChangeListener(<span class="keyword">new</span> SeekBar.OnSeekBarChangeListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgressChanged</span><span class="params">(SeekBar seekBar, <span class="keyword">int</span> progress, <span class="keyword">boolean</span> fromTouch)</span> </span>&#123;</div><div class="line">                Log.v(<span class="string">"onProgressChanged()"</span>, String.valueOf(progress) + <span class="string">", "</span> + String.valueOf(fromTouch));</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>&#123;<span class="comment">//开始拖动</span></div><div class="line">                Log.v(<span class="string">"onStartTrackingTouch()"</span>, String.valueOf(seekBar.getProgress()));</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStopTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>&#123;<span class="comment">//结束拖动</span></div><div class="line">                Log.v(<span class="string">"onStopTrackingTouch()"</span>, String.valueOf(seekBar.getProgress()));</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        Button button = (Button)<span class="keyword">this</span>.findViewById(R.id.seekBarButton);</div><div class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;			</div><div class="line">	<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">		Toast.makeText(SeekBarActivity.<span class="keyword">this</span>, String.valueOf(seekBar.getProgress()), <span class="number">1</span>).show();</div><div class="line">	&#125;&#125;);</div><div class="line">    &#125;&#125;</div></pre></td></tr></table></figure>
<h2 id="2-进度条-ProgressBar"><a href="#2-进度条-ProgressBar" class="headerlink" title="2. 进度条(ProgressBar)"></a>2. 进度条(ProgressBar)</h2><p><img src="http://obovytgzz.bkt.clouddn.com/ui2.png" alt="图片2"><br>在布局xml文件中添加进度条代码：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;ProgressBar </div><div class="line">    android:layout_width=<span class="string">"fill_parent"</span> </div><div class="line">    android:layout_height=<span class="string">"20px"</span></div><div class="line">    style=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></div><div class="line">    android:<span class="built_in">id</span>=<span class="string">"@+id/downloadbar"</span>/&gt;</div></pre></td></tr></table></figure>
<p>在代码中操作进度条：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Progress</span>Bar.setMax(100);//设置最大刻度</div><div class="line"><span class="keyword">Progress</span>Bar.setProgress(0);//设置进度条的当前刻度，如果进度条的最大刻度为100，当前刻度为50，进度条将进行到一半。</div></pre></td></tr></table></figure>
<h2 id="3-输入内容自动完成文本框-AutoCompleteTextView"><a href="#3-输入内容自动完成文本框-AutoCompleteTextView" class="headerlink" title="3. 输入内容自动完成文本框(AutoCompleteTextView)"></a>3. 输入内容自动完成文本框(AutoCompleteTextView)</h2><p><img src="http://obovytgzz.bkt.clouddn.com/ui3.png" alt="图片3"><br>AutoCompleteTextView和EditText组件类似，都可以输入文本。但AutoCompleteTextView组件可以和一个字符串数组或List对象绑定，当用户输入两个及以上字符时，系统将在AutoCompleteTextView组件下方列出字符串数组中所有以输入字符开头的字符串，这一点和www.google.com的搜索框非常相似，当输入某一个要查找的字符串时，google搜索框就会列出以这个字符串开头的最热门的搜索字符串列表。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;AutoCompleteTextView</div><div class="line">   android:layout_width=<span class="string">"fill_parent“  android:layout_height="</span>wrap_content“</div><div class="line">  &lt;!– completionThreshold 指定至少输入几个字符后才会出现自动提示功能 </div><div class="line">   android:completionThreshold=<span class="string">"1“  </span></div><div class="line">   android:id="@+<span class="built_in">id</span>/<span class="built_in">name</span><span class="string">" /&gt;</span></div></pre></td></tr></table></figure>
<p>代码处理：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> onCreate(Bundle savedInstanceState) &#123; ……</div><div class="line">	<span class="keyword">String</span>[] names = &#123;<span class="string">"老张"</span>, <span class="string">"老方"</span>, <span class="string">"老毕"</span>, <span class="string">"李明"</span> , <span class="string">"李丽"</span>, <span class="string">"陈江"</span>, <span class="string">"abc"</span>, <span class="string">"acc"</span>&#125;;</div><div class="line">	AutoCompleteTextView nameText = (AutoCompleteTextView)<span class="keyword">this</span>.findViewById(R.id.name);</div><div class="line">ArrayAdapter&lt;<span class="keyword">String</span>&gt; adapter = <span class="keyword">new</span> ArrayAdapter&lt;<span class="keyword">String</span>&gt;(<span class="keyword">this</span>, android.R.layout.simple_dropdown_item_1line, names);</div><div class="line">	nameText.setAdapter(adapter);&#125;</div></pre></td></tr></table></figure>
<h2 id="4-多次输入内容自动完成-MultiAutoCompleteTextView"><a href="#4-多次输入内容自动完成-MultiAutoCompleteTextView" class="headerlink" title="4. 多次输入内容自动完成(MultiAutoCompleteTextView)"></a>4. 多次输入内容自动完成(MultiAutoCompleteTextView)</h2><p><img src="http://obovytgzz.bkt.clouddn.com/ui4.png" alt="图片4"><br>除了AutoCompleteTextView控件外，我们还可以使用MultiAutoCompleteTextView控件来完成连续输入的功能。也就是说，当输入完一个字符串后，在该字符串后面输入一个逗号（,），在逗号前后可以有任意多个空格，然后再输入一个字符串，仍然会显示自动提示列表。使用MultiAutoCompleteTextView时，需要为它的setTokenizer()方法指定MultiAutoCompleteTextView.CommaTokenizer类对象实例，该对象表示采用逗号作为输入多个字符串的分隔符。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt; MultiAutoCompleteTextView</div><div class="line">   android:layout_width=<span class="string">"fill_parent“  android:layout_height="</span>wrap_content“</div><div class="line">  &lt;!– completionThreshold 指定至少输入几个字符后才会出现自动提示功能</div><div class="line">   android:completionThreshold=<span class="string">"1“  </span></div><div class="line">   android:id="@+<span class="built_in">id</span>/<span class="built_in">name</span><span class="string">" /&gt;</span></div></pre></td></tr></table></figure>
<p>代码处理</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> void onCreate(Bundle savedInstanceState) &#123;  <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">	setContentView(R.layout.main);</div><div class="line">     <span class="keyword">String</span>[] names = &#123;<span class="string">"老张"</span>, <span class="string">"老方"</span>, <span class="string">"老毕"</span>, <span class="string">"李明"</span> , <span class="string">"李丽"</span>, <span class="string">"陈江"</span>, <span class="string">"abc"</span>, <span class="string">"acc"</span>&#125;;</div><div class="line">     MultiAutoCompleteTextView nameText = (MultiAutoCompleteTextView)<span class="built_in">this</span>.findViewById(R.id.name);</div><div class="line">ArrayAdapter&lt;<span class="keyword">String</span>&gt; adapter = <span class="keyword">new</span> <span class="type">ArrayAdapter</span>&lt;<span class="keyword">String</span>&gt;(<span class="built_in">this</span>, 			  	       	android.R.layout.simple_dropdown_item_1line,names);</div><div class="line">     nameText.setAdapter(adapter);</div><div class="line">     nameText.setTokenizer(<span class="keyword">new</span> <span class="type">MultiAutoCompleteTextView</span>.CommaTokenizer());&#125;</div></pre></td></tr></table></figure>
<h2 id="5-列表视图-ListView"><a href="#5-列表视图-ListView" class="headerlink" title="5. 列表视图(ListView)"></a>5. 列表视图(ListView)</h2><p><img src="http://obovytgzz.bkt.clouddn.com/ui5.png" alt="图片5"><br>列表的显示需要三个元素：</p>
<ol>
<li>ListVeiw 用来展示列表的View。</li>
<li>适配器 用来把数据映射到ListView上的中介。</li>
<li>数据具体的将被映射的字符串，图片，或者基本组件。<br>根据列表的适配器类型，列表分为三种，ArrayAdapter，SimpleAdapter和SimpleCursorAdapter。<br>其中以ArrayAdapter最为简单，只能展示一行字。SimpleAdapter有最好的扩充性，可以自定义出各种效果。SimpleCursorAdapter可以认为是SimpleAdapter对数据库的简单结合，可以方面的把数据库的内容以列表的形式展示出来。</li>
</ol>
<h3 id="5-1-ArrayAdapter类型ListView"><a href="#5-1-ArrayAdapter类型ListView" class="headerlink" title="5.1 ArrayAdapter类型ListView"></a>5.1 ArrayAdapter类型ListView</h3><p><img src="http://obovytgzz.bkt.clouddn.com/ui6.png" alt="图片6"></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyListView</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">ListView</span> listView;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    public void onCreate(<span class="type">Bundle</span> savedInstanceState)&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        listView = <span class="keyword">new</span> <span class="type">ListView</span>(<span class="keyword">this</span>);</div><div class="line">        listView.setAdapter(<span class="keyword">new</span> <span class="type">ArrayAdapter</span>&lt;<span class="type">String</span>&gt;(<span class="keyword">this</span>, 			android.<span class="type">R</span>.layout.simple_expandable_list_item_1,getData()));</div><div class="line">        setContentView(listView);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">private</span> <span class="type">List</span>&lt;<span class="type">String</span>&gt; getData()&#123;</div><div class="line">        <span class="type">List</span>&lt;<span class="type">String</span>&gt; data = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;<span class="type">String</span>&gt;();</div><div class="line">        data.add(<span class="string">"测试数据1"</span>);</div><div class="line">        data.add(<span class="string">"测试数据2"</span>);</div><div class="line">        data.add(<span class="string">"测试数据3"</span>);</div><div class="line">        data.add(<span class="string">"测试数据4"</span>);</div><div class="line">        <span class="keyword">return</span> data;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码使用了ArrayAdapter(Context context, int textViewResourceId, List<t> objects)来装配数据，要装配这些数据就需要一个连接ListView视图对象和数组数据的适配器来两者的适配工作，ArrayAdapter的构造需要三个参数，依次为this,布局文件（注意这里的布局文件描述的是列表的每一行的布局，android.R.layout.simple_list_item_1是系统定义好的布局文件只显示一行文字，数据源(一个List集合)。同时用setAdapter()完成适配的最后工作。</t></p>
<h3 id="5-2-SimpleCursorAdapter类型ListView"><a href="#5-2-SimpleCursorAdapter类型ListView" class="headerlink" title="5.2 SimpleCursorAdapter类型ListView"></a>5.2 SimpleCursorAdapter类型ListView</h3><p><img src="http://obovytgzz.bkt.clouddn.com/ui7.png" alt="图片7"></p>
<blockquote>
<p>sdk的解释是这样的：An easy adapter to map columns from a cursor to TextViews or ImageViews defined in an XML file. You can specify which columns you want, which views you want to display the columns, and the XML file that defines the appearance of these views。</p>
</blockquote>
<p>简单的说就是方便把从游标得到的数据进行列表显示，并可以把指定的列映射到对应的TextView中。<br>下面的程序是从电话簿中把联系人显示到类表中。先在通讯录中添加一个联系人作为数据库的数据。然后获得一个指向数据库的Cursor并且定义一个布局文件（当然也可以使用系统自带的）。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyListView2</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">ListView</span> listView;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    public void onCreate(<span class="type">Bundle</span> savedInstanceState)&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        listView = <span class="keyword">new</span> <span class="type">ListView</span>(<span class="keyword">this</span>);</div><div class="line">        <span class="type">Cursor</span> cursor = getContentResolver().query(<span class="type">People</span>.<span class="type">CONTENT_URI</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</div><div class="line">        startManagingCursor(cursor);</div><div class="line">        <span class="type">ListAdapter</span> listAdapter = <span class="keyword">new</span> <span class="type">SimpleCursorAdapter</span>(<span class="keyword">this</span>, 		 	android.<span class="type">R</span>.layout.simple_expandable_list_item_1, </div><div class="line">                cursor,</div><div class="line">                <span class="keyword">new</span> <span class="type">String</span>[]&#123;<span class="type">People</span>.<span class="type">NAME</span>&#125;, </div><div class="line">                <span class="keyword">new</span> int[]&#123;android.<span class="type">R</span>.id.text1&#125;);</div><div class="line">        listView.setAdapter(listAdapter);</div><div class="line">        setContentView(listView);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Cursor cursor = getContentResolver().query(People.CONTENT_URI, null, null, null, null);先获得一个指向系统通讯录数据库的Cursor对象获得数据来源。startManagingCursor(cursor);我们将获得的Cursor对象交由Activity管理，这样Cursor的生命周期和Activity便能够自动同步，省去自己手动管理Cursor。</p>
<p>SimpleCursorAdapter 构造函数前面3个参数和ArrayAdapter是一样的，最后两个参数：一个包含数据库的列的String型数组，一个包含布局文件中对应组件id的int型数组。其作用是自动的将String型数组所表示的每一列数据映射到布局文件对应id的组件上。上面的代码，将NAME列的数据一次映射到布局文件的id为text1的组件上。<br>注意：需要在AndroidManifest.xml中如权限：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;uses-permission android:<span class="built_in">name</span>=<span class="string">"android.permission.READ_CONTACTS"</span>/&gt;</div></pre></td></tr></table></figure>
<h3 id="5-3-SimpleAdapter类型ListView"><a href="#5-3-SimpleAdapter类型ListView" class="headerlink" title="5.3 SimpleAdapter类型ListView"></a>5.3 SimpleAdapter类型ListView</h3><p><img src="http://obovytgzz.bkt.clouddn.com/ui8.png" alt="图片8"><br>SimpleAdapter的扩展性最好，可以定义各种各样的布局出来，可以放上ImageView（图片），还可以放上Button（按钮），CheckBox（复选框）等等。下面的代码都直接继承了ListActivity，ListActivity和普通的Activity没有太大的差别，不同就是对显示ListView做了许多优化，方面显示而已。下面的程序是实现一个带有图片的类表。</p>
<p>首先需要定义好一个用来显示每一个列内容的xml。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span> <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"fill_parent"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span> <span class="attr">android:id</span>=<span class="string">"@+id/img"</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"5px"</span>/&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:id</span>=<span class="string">"@+id/title"</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#FFFFFFFF"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"22px"</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:id</span>=<span class="string">"@+id/info"</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#FFFFFFFF"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"13px"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>实现代码：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> class MyListView3 extends ListActivity &#123;</div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        SimpleAdapter adapter = <span class="keyword">new</span> SimpleAdapter(<span class="keyword">this</span>,getData(),R.layout.vlist,</div><div class="line">                <span class="keyword">new</span> <span class="keyword">String</span>[]&#123;<span class="string">"title"</span>,<span class="string">"info"</span>,<span class="string">"img"</span>&#125;,</div><div class="line">                <span class="keyword">new</span> <span class="built_in">int</span>[]&#123;R.id.title,R.id.info,R.id.img&#125;);</div><div class="line">        setListAdapter(adapter);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> List&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt; getData() &#123;</div><div class="line">        List&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt;();</div><div class="line">        Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;();</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"title"</span>, <span class="string">"G1"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"info"</span>, <span class="string">"google 1"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"img"</span>, R.drawable.i1);</div><div class="line">        list.<span class="built_in">add</span>(<span class="built_in">map</span>);</div><div class="line"> </div><div class="line">        <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;();</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"title"</span>, <span class="string">"G2"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"info"</span>, <span class="string">"google 2"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"img"</span>, R.drawable.i2);</div><div class="line">        list.<span class="built_in">add</span>(<span class="built_in">map</span>);</div><div class="line"> </div><div class="line">        <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;();</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"title"</span>, <span class="string">"G3"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"info"</span>, <span class="string">"google 3"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"img"</span>, R.drawable.i3);</div><div class="line">        list.<span class="built_in">add</span>(<span class="built_in">map</span>);</div><div class="line">         </div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>使用simpleAdapter的数据用一般都是HashMap构成的List，list的每一节对应ListView的每一行。HashMap的每个键值数据映射到布局文件中对应id的组件上。因为系统没有对应的布局文件可用，我们可以自己定义一个布局vlist.xml。下面做适配，new一个SimpleAdapter参数依次是：this，布局文件（vlist.xml），HashMap的 title 和 info，img。布局文件的组件id，title，info，img。布局文件的各组件分别映射到HashMap的各元素上，完成适配。</p>
<h3 id="5-4-有按钮的ListView"><a href="#5-4-有按钮的ListView" class="headerlink" title="5.4 有按钮的ListView"></a>5.4 有按钮的ListView</h3><p><img src="http://obovytgzz.bkt.clouddn.com/ui9.png" alt="图片9"><br>但是有时候，列表不光会用来做显示用，同样可以在在上面添加按钮。添加按钮首先要写一个有按钮的xml文件，然后自然会想到用上面的方法定义一个适配器，然后将数据映射到布局文件上。但是事实并非这样，因为按钮是无法映射的，即使你成功的用布局文件显示出了按钮也无法添加按钮的响应，这时就要研究一下ListView是如何现实的了，而且必须要重写一个类继承BaseAdapter.下面的示例将显示一个按钮和一个图片,两行字如果单击按钮将删除此按钮的所在行。并告诉你ListView究竟是如何工作的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"fill_parent"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span> <span class="attr">android:id</span>=<span class="string">"@+id/img"</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"5px"</span>/&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:id</span>=<span class="string">"@+id/title"</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#FFFFFFFF"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"22px"</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:id</span>=<span class="string">"@+id/info"</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#FFFFFFFF"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"13px"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">android:id</span>=<span class="string">"@+id/view_btn"</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"@string/s_view_btn"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"bottom|right"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>代码实现：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> class MyListView4 extends ListActivity &#123;</div><div class="line">    <span class="keyword">private</span> List&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt; mData;</div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        mData = getData();</div><div class="line">        MyAdapter adapter = <span class="keyword">new</span> MyAdapter(<span class="keyword">this</span>);</div><div class="line">        setListAdapter(adapter);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">private</span> List&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt; getData() &#123;</div><div class="line">        List&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt;();</div><div class="line">        Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;();</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"title"</span>, <span class="string">"G1"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"info"</span>, <span class="string">"google 1"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"img"</span>, R.drawable.i1);</div><div class="line">        list.<span class="built_in">add</span>(<span class="built_in">map</span>);</div><div class="line"> </div><div class="line">        <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;();</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"title"</span>, <span class="string">"G2"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"info"</span>, <span class="string">"google 2"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"img"</span>, R.drawable.i2);</div><div class="line">        list.<span class="built_in">add</span>(<span class="built_in">map</span>);</div><div class="line"> </div><div class="line">        <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;();</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"title"</span>, <span class="string">"G3"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"info"</span>, <span class="string">"google 3"</span>);</div><div class="line">        <span class="built_in">map</span>.put(<span class="string">"img"</span>, R.drawable.i3);</div><div class="line">        list.<span class="built_in">add</span>(<span class="built_in">map</span>);</div><div class="line">         </div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="comment">// ListView 中某项被选中后的逻辑</span></div><div class="line">    @Override</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> onListItemClick(ListView l, View v, <span class="built_in">int</span> position, <span class="keyword">long</span> id) &#123;</div><div class="line">        Log.v(<span class="string">"MyListView4-click"</span>, (<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">"title"</span>));</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * listview中点击按键弹出对话框</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> showInfo()&#123;</div><div class="line">        <span class="keyword">new</span> AlertDialog.Builder(<span class="keyword">this</span>)</div><div class="line">        .setTitle(<span class="string">"我的listview"</span>)</div><div class="line">        .setMessage(<span class="string">"介绍..."</span>)</div><div class="line">        .setPositiveButton(<span class="string">"确定"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            <span class="keyword">public</span> <span class="keyword">void</span> onClick(DialogInterface dialog, <span class="built_in">int</span> which) &#123;</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .show();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> class ViewHolder&#123;</div><div class="line">        <span class="keyword">public</span> ImageView img;</div><div class="line">        <span class="keyword">public</span> TextView title;</div><div class="line">        <span class="keyword">public</span> TextView info;</div><div class="line">        <span class="keyword">public</span> Button viewBtn;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> class MyAdapter extends BaseAdapter&#123;</div><div class="line">        <span class="keyword">private</span> LayoutInflater mInflater;</div><div class="line">        <span class="keyword">public</span> MyAdapter(Context context)&#123;</div><div class="line">            <span class="keyword">this</span>.mInflater = LayoutInflater.from(context);</div><div class="line">        &#125;</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="built_in">int</span> getCount() &#123;</div><div class="line">            <span class="keyword">return</span> mData.<span class="built_in">size</span>();</div><div class="line">        &#125;</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keyword">Object</span> getItem(<span class="built_in">int</span> arg0) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keyword">long</span> getItemId(<span class="built_in">int</span> arg0) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">         @Override</div><div class="line">        <span class="keyword">public</span> View getView(<span class="built_in">int</span> position, View convertView, ViewGroup parent) &#123;</div><div class="line">            ViewHolder holder = <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">if</span> (convertView == <span class="keyword">null</span>) &#123;</div><div class="line">                holder=<span class="keyword">new</span> ViewHolder();  </div><div class="line">                convertView = mInflater.inflate(R.layout.vlist2, <span class="keyword">null</span>);</div><div class="line">                holder.img = (ImageView)convertView.findViewById(R.id.img);</div><div class="line">                holder.title = (TextView)convertView.findViewById(R.id.title);</div><div class="line">                holder.info = (TextView)convertView.findViewById(R.id.info);</div><div class="line">                holder.viewBtn = (Button)convertView.findViewById(R.id.view_btn);</div><div class="line">                convertView.setTag(holder);</div><div class="line">            &#125;<span class="keyword">else</span> &#123;</div><div class="line">                holder = (ViewHolder)convertView.getTag();</div><div class="line">            &#125;</div><div class="line">            holder.img.setBackgroundResource((Integer)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">"img"</span>));</div><div class="line">            holder.title.setText((<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">"title"</span>));</div><div class="line">            holder.info.setText((<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">"info"</span>));</div><div class="line">             </div><div class="line">            holder.viewBtn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">                @Override</div><div class="line">                <span class="keyword">public</span> <span class="keyword">void</span> onClick(View v) &#123;</div><div class="line">                    showInfo();                 </div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            <span class="keyword">return</span> convertView;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面将对上述代码，做详细的解释，listView在开始绘制的时候，系统首先调用getCount（）函数，根据他的返回值得到listView的长度（这也是为什么在开始的第一张图特别的标出列表长度），然后根据这个长度，调用getView（）逐一绘制每一行。如果你的getCount（）返回值是0的话，列表将不显示同样return 1，就只显示一行。</p>
<p>系统显示列表时，首先实例化一个适配器（这里将实例化自定义的适配器）。当手动完成适配时，必须手动映射数据，这需要重写getView（）方法。系统在绘制列表的每一行的时候将调用此方法。getView()有三个参数，position表示将显示的是第几行，covertView是从布局文件中inflate来的布局。我们用LayoutInflater的方法将定义好的vlist2.xml文件提取成View实例用来显示。然后将xml文件中的各个组件实例化（简单的findViewById()方法）。这样便可以将数据对应到各个组件上了。但是按钮为了响应点击事件，需要为它添加点击监听器，这样就能捕获点击事件。至此一个自定义的listView就完成了，现在让我们回过头从新审视这个过程。系统要绘制ListView了，他首先获得要绘制的这个列表的长度，然后开始绘制第一行，怎么绘制呢？调用getView()函数。在这个函数里面首先获得一个View（实际上是一个ViewGroup），然后再实例并设置各个组件，显示之。好了，绘制完这一行了。那 再绘制下一行，直到绘完为止。在实际的运行过程中会发现listView的每一行没有焦点了，这是因为Button抢夺了listView的焦点，只要布局文件中将Button设置为没有焦点就OK了。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android基础/" rel="tag"># Android基础</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2011/08/Android基础-2011-08-11-android-basic-13.html" rel="next" title="Android基础13 常用UI（下）">
                <i class="fa fa-chevron-left"></i> Android基础13 常用UI（下）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2011/07/Android基础-2011-07-21-android-basic-11.html" rel="prev" title="Android基础11 常用UI（上）">
                Android基础11 常用UI（上） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Scott" />
          <p class="site-author-name" itemprop="name">Scott</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">41</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-拖动条-SeekBar"><span class="nav-number">1.</span> <span class="nav-text">1. 拖动条(SeekBar)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-进度条-ProgressBar"><span class="nav-number">2.</span> <span class="nav-text">2. 进度条(ProgressBar)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-输入内容自动完成文本框-AutoCompleteTextView"><span class="nav-number">3.</span> <span class="nav-text">3. 输入内容自动完成文本框(AutoCompleteTextView)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-多次输入内容自动完成-MultiAutoCompleteTextView"><span class="nav-number">4.</span> <span class="nav-text">4. 多次输入内容自动完成(MultiAutoCompleteTextView)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-列表视图-ListView"><span class="nav-number">5.</span> <span class="nav-text">5. 列表视图(ListView)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-ArrayAdapter类型ListView"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 ArrayAdapter类型ListView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-SimpleCursorAdapter类型ListView"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 SimpleCursorAdapter类型ListView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-SimpleAdapter类型ListView"><span class="nav-number">5.3.</span> <span class="nav-text">5.3 SimpleAdapter类型ListView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-有按钮的ListView"><span class="nav-number">5.4.</span> <span class="nav-text">5.4 有按钮的ListView</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Scott</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://Scott.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://www.sguotao.com/blog/2011/08/Android基础-2011-08-10-android-basic-12.html';
          this.page.identifier = '/blog/2011/08/Android基础-2011-08-10-android-basic-12.html';
          this.page.title = 'Android基础12 常用UI（中）';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://Scott.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  





  

  

  

  

  

</body>
</html>
