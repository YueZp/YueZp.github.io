<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="googlea8ba7e863392b1ab" />













  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="飞跃长城,Vultr," />





  <link rel="alternate" href="/atom.xml" title="Scott's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="1.Vultr和搬瓦工Vultr和搬瓦工哪个好？从以下几方面做个对比： 1.1 Vultr官网地址：https://www.vultr.com，月付低至2.5美元，按照小时付费，($0.004/小时)，可随时关停，不用不收费。目前在全球有15个数据中心，基于KVM虚拟，免费snapshots（快照，一键备份VPS）、免费50G备份空间，允许自定义ISO（方便安装windows）等功能；隶属于顶级机">
<meta name="keywords" content="飞跃长城,Vultr">
<meta property="og:type" content="article">
<meta property="og:title" content="如何优雅的飞跃长城">
<meta property="og:url" content="http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html">
<meta property="og:site_name" content="Scott&#39;s Blog">
<meta property="og:description" content="1.Vultr和搬瓦工Vultr和搬瓦工哪个好？从以下几方面做个对比： 1.1 Vultr官网地址：https://www.vultr.com，月付低至2.5美元，按照小时付费，($0.004/小时)，可随时关停，不用不收费。目前在全球有15个数据中心，基于KVM虚拟，免费snapshots（快照，一键备份VPS）、免费50G备份空间，允许自定义ISO（方便安装windows）等功能；隶属于顶级机">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/2018070115304344097889.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043474915453.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043531033607.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043620261378.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043636657206.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043642838215.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043652432473.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/2018070115304366146794.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043681761707.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043741869105.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043752163957.png">
<meta property="og:image" content="http://7u2np3.com1.z0.glb.clouddn.com/20180701153044054987445.png">
<meta property="og:image" content="https://www.vultr.com/media/banner_1.png">
<meta property="og:updated_time" content="2018-07-03T02:04:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="如何优雅的飞跃长城">
<meta name="twitter:description" content="1.Vultr和搬瓦工Vultr和搬瓦工哪个好？从以下几方面做个对比： 1.1 Vultr官网地址：https://www.vultr.com，月付低至2.5美元，按照小时付费，($0.004/小时)，可随时关停，不用不收费。目前在全球有15个数据中心，基于KVM虚拟，免费snapshots（快照，一键备份VPS）、免费50G备份空间，允许自定义ISO（方便安装windows）等功能；隶属于顶级机">
<meta name="twitter:image" content="http://7u2np3.com1.z0.glb.clouddn.com/2018070115304344097889.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"always","offset":12,"offset_float":0,"b2t":true,"scrollpercent":true},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html"/>





  <title>如何优雅的飞跃长城 | Scott's Blog</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?760edc77a59a2329550e2d68c6400d9b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>
    
    <!-- 在右上角或者左上角实现fork me on github -->
    <a href="https://github.com/sguotao" class="github-corner" aria-label="View source on Github"><svg width="92" height="92" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Scott's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">和光同尘,静水流深</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Scott">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Scott's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">如何优雅的飞跃长城</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-29T16:39:15+08:00">
                2018-06-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/读书笔记-2018-06-29-如何优雅的飞跃长城.html" class="leancloud_visitors" data-flag-title="如何优雅的飞跃长城">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  2,324字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  9分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-Vultr和搬瓦工"><a href="#1-Vultr和搬瓦工" class="headerlink" title="1.Vultr和搬瓦工"></a>1.Vultr和搬瓦工</h2><p>Vultr和搬瓦工哪个好？从以下几方面做个对比：</p>
<h3 id="1-1-Vultr"><a href="#1-1-Vultr" class="headerlink" title="1.1 Vultr"></a>1.1 Vultr</h3><p>官网地址：<a href="https://www.vultr.com" target="_blank" rel="noopener">https://www.vultr.com</a>，月付低至2.5美元，按照小时付费，($0.004/小时)，可随时关停，不用不收费。目前在全球有15个数据中心，基于KVM虚拟，免费snapshots（快照，一键备份VPS）、免费50G备份空间，允许自定义ISO（方便安装windows）等功能；隶属于顶级机房choopa，有实力、有资金，靠谱！</p>
<p>这是注册优惠地址：<a href="https://www.vultr.com/?ref=7463051" target="_blank" rel="noopener">注册优惠地址</a>，通过这个链接，注册可以享受优惠。</p>
<h3 id="1-2-搬瓦工"><a href="#1-2-搬瓦工" class="headerlink" title="1.2 搬瓦工"></a>1.2 搬瓦工</h3><p>官方网站：<a href="https://bwh1.net" target="_blank" rel="noopener">https://bwh1.net</a>，目前搬瓦工VPS机房已经达到7个，分别是New York [USNY_2]，Los Angeles, California (DC1 QNET)，Los Angeles, California (DC2 MCOM)，Fremont, California，Phoenix, Arizona，Jacksonville, Florida，Amsterdam, Netherlands。没有特殊需求下，建议使用洛杉矶（Los Angeles）。常规最低配置$19.99/年，相当于每月1美金多一点。不过经常缺货，需要的要赶机会。</p>
<h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><p><strong>1.背景</strong></p>
<p>Vultr隶属其母公司choopa.com，2000年开始进入IDC行业，有自己的多处机房（Tier4），完全独立自主，实力雄厚，能够提供SLA保障。</p>
<p>bandwagonhost，隶属于IT7公司，从2005年开始进入IDC行业，没有自己的机房，在相关机房租用机柜运作。</p>
<p><strong>2.售后</strong></p>
<p>Vultr：有专门的团队，多人处理；</p>
<p>搬瓦工：基本为固定的一个人处理；</p>
<p><strong>3.价格</strong></p>
<p>Vultr：最低配置的VPS月付2.5美元，512M内存，KVM虚拟；由于vultr已经大规模部署，所以在不同价格阶段的配置都比搬瓦工便宜，所以价格上vultr胜出。</p>
<p>搬瓦工：最低配置的KVM月付2.88美元，最低OVZ月付2.99美元</p>
<p><strong>4.资源配置</strong></p>
<p>抛开VPS本身的硬件资源不谈，我们只说额外的附加产品</p>
<p>vultr：免费50G备份空间、免费snapshots快照、支持额外购买多个IP，支持升级到10Gbps端口，支持IP广播，支持DDOS防护，启动脚本设置，一键部署多种APP，支持按小时付款，可以随意删除和创建VPS。</p>
<p>搬瓦工：免费snapshot，常规版本VPS支持转移机房。</p>
<h2 id="2-新用户注册购买"><a href="#2-新用户注册购买" class="headerlink" title="2.新用户注册购买"></a>2.新用户注册购买</h2><p>文无第一，武无第二，经过再三的抉择之后，我选择了Vlutr，基本上充10美刀，能够用半年，而且不定期的活动还会有美元送。本人之前也用过很多的科学上网的方法，最后都不是很理想，最后还是决定搭建自己的VPS，主要经常使用Google，看Youtube的视频，下面把自己的搭建过程做一个分享和整理。</p>
<h3 id="2-1-创建账户"><a href="#2-1-创建账户" class="headerlink" title="2.1 创建账户"></a>2.1 创建账户</h3><p>进入官网<a href="https://www.vultr.com/?ref=7463051" target="_blank" rel="noopener">https://www.vultr.com</a>，登录注册邮箱，进行验证，验证成功后，就注册完成了。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/2018070115304344097889.png" alt="2018070115304344097889.png"></p>
<h3 id="2-2-充值"><a href="#2-2-充值" class="headerlink" title="2.2 充值"></a>2.2 充值</h3><p>Vlutr目标支持5中支付方式，我们常用的可能是支付宝和信用卡，选择好支付方式和充值金额之后，按照提示进行一步步的操作。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043474915453.png" alt="20180701153043474915453.png"></p>
<h2 id="3-Vultr搭建"><a href="#3-Vultr搭建" class="headerlink" title="3.Vultr搭建"></a>3.Vultr搭建</h2><p>在搭建自己的VPS之前，需要根据自己的网络环境，确定使用的是联通，移动，电信还是其它的二级运营商，不同的运营商可能连接不同机房的速度是不一样的，比如我在家就使用东京的机房，在公司使用西雅图的机房，在公司使用东京的机房，会出现丢包比较严重的情况。</p>
<p>Vultr提供了测试地址，只需要在ping一下。</p>
<table>
<thead>
<tr>
<th style="text-align:center">测试机房</th>
<th style="text-align:center">地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">日本 东京</td>
<td style="text-align:center">hnd-jp-ping.vultr.com</td>
</tr>
<tr>
<td style="text-align:center">新加坡</td>
<td style="text-align:center">sgp-ping.vultr.com</td>
</tr>
<tr>
<td style="text-align:center">悉尼</td>
<td style="text-align:center">syd-au-ping.vultr.com</td>
</tr>
<tr>
<td style="text-align:center">华盛顿州 西雅图</td>
<td style="text-align:center">wa-us-ping.vultr.com</td>
</tr>
<tr>
<td style="text-align:center">美西 加州 硅谷</td>
<td style="text-align:center">sjo-ca-us-ping.vultr.com</td>
</tr>
<tr>
<td style="text-align:center">美西 加州 洛杉矶</td>
<td style="text-align:center">lax-ca-us-ping.vultr.com</td>
</tr>
</tbody>
</table>
<p>这是我在公司测试的结果，发现西雅图机房的丢包率和连接速度都优于其他期房，于是选择了西雅图机房。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043531033607.png" alt="20180701153043531033607.png"></p>
<h3 id="3-1-创建虚拟机"><a href="#3-1-创建虚拟机" class="headerlink" title="3.1 创建虚拟机"></a>3.1 创建虚拟机</h3><p>1.在页面中点击<strong>+</strong>图标开始创建虚拟机。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043620261378.png" alt="20180701153043620261378.png"></p>
<p>2.根据自己的测试结果，选择创建服务器的位置。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043636657206.png" alt="20180701153043636657206.png"></p>
<p>3.选择安装虚拟机的系统，如果选择Windows系统，需要付费，当然可以选择自己上传的ISO镜像。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043642838215.png" alt="20180701153043642838215.png"></p>
<p>4.选择虚拟机的配置，不同的配置，价钱也不相同，如果只是用来搭建VPS，选择5美刀的完全够用，新推出的2.5美刀，只支持IPV6。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043652432473.png" alt="20180701153043652432473.png"></p>
<p>5.剩下的选项我们直接选择默认即可。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/2018070115304366146794.png" alt="2018070115304366146794.png"></p>
<p>6.创建成功后，虚拟机会显示Running运行的状态。这里的Server Stop和Server Destroy都可以暂停虚拟机，区别是Stop状态，还是会进行计费的。所以如果一段时间不使用，为了避免损失，可以选择Destroy。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043681761707.png" alt="20180701153043681761707.png"></p>
<h3 id="3-2-搭建Shadowsocks服务端"><a href="#3-2-搭建Shadowsocks服务端" class="headerlink" title="3.2 搭建Shadowsocks服务端"></a>3.2 搭建Shadowsocks服务端</h3><p>虚拟机创建完成之后，下面就是搭建Shadowsocks服务器了，如果是Windows系统，建议安装Xshell，如果是mac或linux系统，可以在Terminal中使用ssh直接连接。</p>
<p>关于Xshell，目前最新的版本是Xshell6，如果是只是为了连接我们创建的虚拟机，可以去官网下载xshell6的免费版本。</p>
<p>连接上虚拟机后，复制下面命令，然后在Xshell或Terminal中回车运行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocksR.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/shadowsocksR.sh &amp;&amp; bash shadowsocksR.sh</span><br></pre></td></tr></table></figure>
<p>回车后会自动下载脚本并运行，依次输入各项信息之后，按回车继续。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043741869105.png" alt="20180701153043741869105.png"></p>
<p>如果在输入过程中，需要进行修改，需要按ctrl或command键加删除键进行删除。等待几分钟后，Shadowsocks搭建成功。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153043752163957.png" alt="20180701153043752163957.png"></p>
<p>有时候我们需要修改已经搭建好的Shadowsocket的配置信息。不需要重新进行安装，运行下面的命令,然后重新输入各项配置信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocksR.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/shadowsocksR.sh &amp;&amp; bash shadowsocksR.sh modify</span><br></pre></td></tr></table></figure>
<h3 id="3-3-安装速锐"><a href="#3-3-安装速锐" class="headerlink" title="3.3 安装速锐"></a>3.3 安装速锐</h3><p>到这里已经搭建好了Shadowsockets服务器，但是由于服务器都在国外，会出现链接比较慢的情况，这里需要安装加速软件来进行提速。</p>
<p>需要说明的是，加速软件有很多，比如速锐和Google BBR，由于速锐会降级系统内核，而Google BBR会升级系统内核，两个加速器存在冲突，不能同时安装。这里安装的是速锐。</p>
<p>在安装速锐之前，需要先确定安装的虚拟机的系统的版本。在Xshell或者Terminal中运行命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure>
<ul>
<li>结果以 2 开头，例如 2.6.32-696.18.7.el6.x86_64。这种输出结果说明我们的服务器为 CentOS6 x64 系统。</li>
<li>结果以 3 开头，例如 3.10.0-693.11.6.el7.x86_64。这种输出结果说明我们的服务器为 CentOS7 x64 系统，。</li>
<li>结果以 4 开头，例如 4.12.10-1.el7.elrepo.x86_64。这种输出结果说明我们的服务器已经安装 Google BBR 拥塞控制算法，此时已经无法继续安装锐速。</li>
</ul>
<p><strong>这里以CentOS6 x64 系统进行说明，后面也会提供CentOS7 x64 系统的下载及安装命令。</strong></p>
<p>当确认我们的系统是CentOS6 x64后，复制并运行下面命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; bash appex.sh install &apos;2.6.32-642.el6.x86_64&apos;</span><br></pre></td></tr></table></figure>
<p>如果虚拟机是CentOS7 x64系统，需要运行下面的命令，<strong>注意与CentOS6 x64系统的区别。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O rskernel.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/rskernel.sh &amp;&amp; bash rskernel.sh</span><br></pre></td></tr></table></figure>
<p>运行命令后，会出现三项的提示信息，这里使用默认值即可，直接按三次回车。安装成功后会看到 <strong><em>ServerSpeeder is running!</em></strong> 的提示信息。<br><img src="http://7u2np3.com1.z0.glb.clouddn.com/20180701153044054987445.png" alt="20180701153044054987445.png"></p>
<p>如果是CentOS7 x64的系统，需要多运行一次下面的命令，在安装完速锐后，会重启虚拟机，待虚拟机启动完成后，使用Xshell或Terminal连接服务器，运行命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install net-tools -y &amp;&amp; wget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; bash appex.sh install</span><br></pre></td></tr></table></figure>
<p>运行命令后出现的三项提示信息，也是用默认值即可，直接三次回车。安装成功后，也会看到<strong><em>ServerSpeeder is running!</em></strong> 的提示信息。</p>
<h3 id="3-4-安装客户端"><a href="#3-4-安装客户端" class="headerlink" title="3.4 安装客户端"></a>3.4 安装客户端</h3><p>进行到这里，服务端VPS的搭建已经完成了，下面就是客户端如何使用我们已经搭建好的VPS了。这里使用的是Shadowsocks的客户端。</p>
<p><a href="https://curls.fun/Shadowsocks/ShadowsocksR-Windows-4.9.0.zip" target="_blank" rel="noopener">Windows客户端</a></p>
<p><a href="https://www.vultrcn.com/goto/?url=aHR0cHM6Ly9jdXJscy5mdW4vU2hhZG93c29ja3MvU2hhZG93c29ja3NSLU1hY09TLTEuNy4wLnppcA==" target="_blank" rel="noopener">MacOS客户端</a></p>
<p><a href="https://www.vultrcn.com/goto/?url=aHR0cHM6Ly9jdXJscy5mdW4vU2hhZG93c29ja3MvU2hhZG93c29ja3NSLUFuZHJvaWQtMy40LjAuOC5hcGs=" target="_blank" rel="noopener">Android客户端</a></p>
<p>如果是Iphone等IOS设备，需要使用PP助手进行安装。<a href="https://www.25pp.com/ios/detail_1923429/" target="_blank" rel="noopener">IOS客户端</a></p>
<p>另外可以在App Store中搜索 BestWingy 进行下载安装。</p>
<h2 id="4-常见问题及解决办法"><a href="#4-常见问题及解决办法" class="headerlink" title="4.常见问题及解决办法"></a>4.常见问题及解决办法</h2><h3 id="4-1-注册Vlutr"><a href="#4-1-注册Vlutr" class="headerlink" title="4.1 注册Vlutr"></a>4.1 注册Vlutr</h3><p>注册Vlutr时可以使用下面的<a href="https://www.vultr.com/?ref=7463051" target="_blank" rel="noopener">推广链接</a>，或者直接点击图片，这样就有机会获得10美刀，差不多是两个月的VPS的使用权。</p>
<p><a href="https://www.vultr.com/?ref=7463051" target="_blank" rel="noopener"><img src="https://www.vultr.com/media/banner_1.png" alt=""></a></p>
<h3 id="4-2-如果在安装过程中出现“Resolving-raw-githubusercontent-com…-failed-Temporary-failure-in-name-resolution-”提示，可以使用如下命令"><a href="#4-2-如果在安装过程中出现“Resolving-raw-githubusercontent-com…-failed-Temporary-failure-in-name-resolution-”提示，可以使用如下命令" class="headerlink" title="4.2 如果在安装过程中出现“Resolving raw.githubusercontent.com… failed: Temporary failure in name resolution.”提示，可以使用如下命令"></a>4.2 如果在安装过程中出现“Resolving raw.githubusercontent.com… failed: Temporary failure in name resolution.”提示，可以使用如下命令</h3><p>wget: unable to resolve host address “raw.githubusercontent.com”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;nameserver 8.8.8.8&apos;&gt; /etc/resolv.conf</span><br></pre></td></tr></table></figure>
<hr>
<p>本文链接：<a href="http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html">http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    

    <div>
      
        
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>本文作者：</strong>
      Scott
    </li>
    <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html" title="如何优雅的飞跃长城">http://www.sguotao.top/读书笔记-2018-06-29-如何优雅的飞跃长城.html</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
    </li>
  </ul>


      
    </div>

    <div>
      
        
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-8474352740015305",
    enable_page_level_ads: true
  });
</script>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/飞跃长城/" rel="tag"><i class="fa fa-tag"></i> 飞跃长城</a>
          
            <a href="/tags/Vultr/" rel="tag"><i class="fa fa-tag"></i> Vultr</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/生活感悟-2018-06-26-学习一门编程语言大致经历的阶段.html" rel="next" title="学习一门语言大致经历的阶段">
                <i class="fa fa-chevron-left"></i> 学习一门语言大致经历的阶段
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Android进阶-2018-07-03-如何下载并查看Android源码.html" rel="prev" title="如何下载并查看Android源码">
                如何下载并查看Android源码 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8yODkyOC81NDk3"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Scott" />
          <p class="site-author-name" itemprop="name">Scott</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">86</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">60</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sguotao" target="_blank" rel="external nofollow" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Vultr和搬瓦工"><span class="nav-number">1.</span> <span class="nav-text">1.Vultr和搬瓦工</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Vultr"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 Vultr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-搬瓦工"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 搬瓦工</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对比"><span class="nav-number">1.3.</span> <span class="nav-text">对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-新用户注册购买"><span class="nav-number">2.</span> <span class="nav-text">2.新用户注册购买</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-创建账户"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 创建账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-充值"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 充值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Vultr搭建"><span class="nav-number">3.</span> <span class="nav-text">3.Vultr搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-创建虚拟机"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 创建虚拟机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-搭建Shadowsocks服务端"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 搭建Shadowsocks服务端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-安装速锐"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 安装速锐</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-安装客户端"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 安装客户端</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-常见问题及解决办法"><span class="nav-number">4.</span> <span class="nav-text">4.常见问题及解决办法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-注册Vlutr"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 注册Vlutr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-如果在安装过程中出现“Resolving-raw-githubusercontent-com…-failed-Temporary-failure-in-name-resolution-”提示，可以使用如下命令"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 如果在安装过程中出现“Resolving raw.githubusercontent.com… failed: Temporary failure in name resolution.”提示，可以使用如下命令</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Scott</span>
  <span class="with-love">
    <i class="fa fa-pencil"></i>
  </span>
  <span class="post-count">共写了191.8k字</span>
</div>



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (search_path.endsWith("json")) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("iH9ug4Eu98bS8XiH30QEwODs-gzGzoHsz", "D0qgHUsqtcQOClhgS4ElkmDQ");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.1"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.1"></script>


  

</body>
</html>
